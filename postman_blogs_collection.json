{
	"info": {
		"_postman_id": "blogs-crud-collection",
		"name": "Blogs CRUD",
		"description": "Complete CRUD operations for Blogs management. Public endpoints for viewing, admin endpoints for management.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Public Endpoints",
			"item": [
				{
					"name": "Get All Blogs",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has blogs data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('data');",
									"    pm.expect(jsonData).to.have.property('pagination');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/blogs?search=&is_active=&sorted_by=all",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"blogs"
							],
							"query": [
								{
									"key": "search",
									"value": "",
									"description": "Search by title_en or title_ar",
									"disabled": true
								},
								{
									"key": "is_active",
									"value": "",
									"description": "Filter by active status: true or false",
									"disabled": true
								},
								{
									"key": "sorted_by",
									"value": "all",
									"description": "Sort by: title, newest, oldest, all"
								}
							]
						},
						"description": "Get all blogs with pagination. Public endpoint, no authentication required."
					}
				},
				{
					"name": "Get All Blogs - With Filters",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has blogs data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('data');",
									"    pm.expect(jsonData).to.have.property('pagination');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/blogs?search=&is_active=true&sorted_by=newest",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"blogs"
							],
							"query": [
								{
									"key": "search",
									"value": "",
									"description": "Search by title_en or title_ar",
									"disabled": true
								},
								{
									"key": "is_active",
									"value": "true",
									"description": "Filter by active status: true or false"
								},
								{
									"key": "sorted_by",
									"value": "newest",
									"description": "Sort by: title, newest, oldest, all"
								}
							]
						},
						"description": "Get all blogs with filters applied. Example: active blogs sorted by newest."
					}
				},
				{
					"name": "Get Blog by ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has blog data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('data');",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data).to.have.property('title_en');",
									"    pm.expect(jsonData.data).to.have.property('title_ar');",
									"    pm.expect(jsonData.data).to.have.property('description_en');",
									"    pm.expect(jsonData.data).to.have.property('description_ar');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/blogs/{{blog_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"blogs",
								"{{blog_id}}"
							]
						},
						"description": "Get a specific blog by ID. Public endpoint, no authentication required. Note: Set blog_id variable from Create Blog response."
					}
				},
				{
					"name": "Search Blogs",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/blogs?search=technology&sorted_by=title",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"blogs"
							],
							"query": [
								{
									"key": "search",
									"value": "technology",
									"description": "Search term (searches in title_en and title_ar)"
								},
								{
									"key": "sorted_by",
									"value": "title",
									"description": "Sort by: title, newest, oldest, all"
								}
							]
						},
						"description": "Search blogs by title. Public endpoint, no authentication required."
					}
				}
			]
		},
		{
			"name": "Admin Endpoints",
			"item": [
				{
					"name": "Create Blog",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"if (pm.response.code === 201) {",
									"    const jsonData = pm.response.json();",
									"    pm.environment.set('blog_id', jsonData.data.id);",
									"}",
									"",
									"pm.test(\"Response has blog data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('data');",
									"    pm.expect(jsonData.data).to.have.property('title_en');",
									"    pm.expect(jsonData.data).to.have.property('title_ar');",
									"    pm.expect(jsonData.data).to.have.property('description_en');",
									"    pm.expect(jsonData.data).to.have.property('description_ar');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "title_en",
									"value": "Introduction to Laravel",
									"type": "text"
								},
								{
									"key": "title_ar",
									"value": "مقدمة إلى Laravel",
									"type": "text"
								},
								{
									"key": "description_en",
									"value": "Laravel is a powerful PHP framework that makes web development elegant and enjoyable. In this blog post, we'll explore the fundamentals of Laravel and how it can help you build robust web applications.",
									"type": "text"
								},
								{
									"key": "description_ar",
									"value": "Laravel هو إطار عمل PHP قوي يجعل تطوير الويب أنيقًا وممتعًا. في منشور المدونة هذا، سوف نستكشف أساسيات Laravel وكيف يمكن أن يساعدك في بناء تطبيقات ويب قوية.",
									"type": "text"
								},
								{
									"key": "is_active",
									"value": "true",
									"type": "text"
								},
								{
									"key": "image",
									"type": "file",
									"src": [],
									"description": "Image file (jpeg, png, jpg, gif, webp, max 5MB)"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/admin/blogs",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"blogs"
							]
						},
						"description": "Create a new blog. Requires admin authentication. Automatically saves blog_id to environment. Note: Image file is required. Select an image file in the form-data."
					}
				},
				{
					"name": "Update Blog",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has updated blog data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('data');",
									"    pm.expect(jsonData.data).to.have.property('title_en');",
									"    pm.expect(jsonData.data).to.have.property('title_ar');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "title_en",
									"value": "Advanced Laravel Techniques",
									"type": "text",
									"disabled": true
								},
								{
									"key": "title_ar",
									"value": "تقنيات Laravel المتقدمة",
									"type": "text",
									"disabled": true
								},
								{
									"key": "description_en",
									"value": "Updated description with advanced techniques and best practices.",
									"type": "text",
									"disabled": true
								},
								{
									"key": "description_ar",
									"value": "الوصف المحدث مع التقنيات المتقدمة وأفضل الممارسات.",
									"type": "text",
									"disabled": true
								},
								{
									"key": "is_active",
									"value": "false",
									"type": "text",
									"disabled": true
								},
								{
									"key": "image",
									"type": "file",
									"src": [],
									"description": "Image file (optional, only if updating image)",
									"disabled": true
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/admin/blogs/{{blog_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"blogs",
								"{{blog_id}}"
							]
						},
						"description": "Update a blog. Requires admin authentication. All fields are optional. Note: Set blog_id variable from Create Blog response. Enable the fields you want to update. Image is optional - only include if you want to update the image."
					}
				},
				{
					"name": "Update Blog - Text Only (No Image)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has updated blog data\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('data');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "title_en",
									"value": "Updated Blog Title",
									"type": "text"
								},
								{
									"key": "is_active",
									"value": "true",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/admin/blogs/{{blog_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"blogs",
								"{{blog_id}}"
							]
						},
						"description": "Update blog text fields only (without updating image). All fields are optional. You can update just one field or multiple fields."
					}
				},
				{
					"name": "Delete Blog",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has success message\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('message');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Accept",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{admin_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/admin/blogs/{{blog_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"admin",
								"blogs",
								"{{blog_id}}"
							]
						},
						"description": "Delete a blog. Requires admin authentication. Note: Set blog_id variable from Create Blog response."
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		}
	]
}
